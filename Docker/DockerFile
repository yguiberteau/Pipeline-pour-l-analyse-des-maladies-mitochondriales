# Utilisation d'une image de base
FROM ubuntu:latest

RUN apt-get update && apt-get install --no-install-recommends -y \
 libncurses5-dev \
 libbz2-dev \
 liblzma-dev \
 libcurl4-gnutls-dev \
 zlib1g-dev \
 libssl-dev \
 gcc \
 wget \
 make \
 perl \
 bzip2 \
 gnuplot \
 ca-certificates \
 gawk && \
 apt-get autoclean && rm -rf /var/lib/apt/lists/*

# install samtools, make /data
ARG SAMTOOLSVER=1.13

RUN wget https://github.com/samtools/samtools/releases/download/${SAMTOOLSVER}/samtools-${SAMTOOLSVER}.tar.bz2 && \
    tar -xjf samtools-${SAMTOOLSVER}.tar.bz2 && \
    rm samtools-${SAMTOOLSVER}.tar.bz2 && \
    cd samtools-${SAMTOOLSVER} && \
    ./configure && \
    make && \
    make install && \
    cd .. && \
    rm -rf samtools-${SAMTOOLSVER} && \
    mkdir /data

 # Mise à jour du système et installation des dépendances nécessaires
# install dependencies and clean up apt garbage
# COPY --from=builder . /

# set perl locale settings
ENV LC_ALL=C

# Création du répertoire "projet"
RUN mkdir /projet

# Création du fichier "benzinzin.txt"
RUN echo "Contenu du fichier benzinzin.txt" > /projet/benzinzin.txt

# Copier le fichier FASTQ dans le conteneur
COPY IonXpress_011.fastq /data/IonXpress_011.fastq

# Convertir le fichier FASTQ en fichier FASTA
RUN samtools fastq -0 /projet/output.fasta /data/IonXpress_011.fastq


# Instruction CMD pour exécuter une commande par défaut lorsque le conteneur est démarré
CMD ["echo","ueue"]

